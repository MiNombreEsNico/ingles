@use '../base/variables' as v;
@use '../base/mixins' as m;
@use 'sass:color';

// Panel de Administración
.page-panel-admin {
    display: flex;
    min-height: 100vh;
    background-color: v.$color-fondo-body;
    font-family: v.$fuente-principal;

    @include m.telefono {
        flex-direction: column;
    }

    // Personalización específica para admin
    .admin-header {
        background: linear-gradient(135deg, v.$lila-easily 0%, v.$lila-easily-hover 100%);
        color: v.$blanco;
        padding: 3rem;
        border-radius: v.$border-radius-large;
        margin-bottom: 3rem;
        text-align: center;

        .admin-title {
            font-size: 3rem;
            margin: 0 0 1rem 0;
            font-family: v.$fuente-titulo;
        }

        .admin-subtitle {
            font-size: 1.6rem;
            opacity: 0.9;
            margin: 0;
        }
    }

    // usuarios pendientes
    .users-section {
        background: v.$blanco;
        border-radius: v.$border-radius-large;
        box-shadow: v.$sombra-card;
        margin-bottom: 3rem;
        overflow: hidden;

        .section-header {
            background-color: v.$color-fondo-th;
            padding: 2rem 3rem;
            border-bottom: 1px solid v.$borde-1;

            .section-title {
                font-size: 2.2rem;
                font-weight: 700;
                color: v.$color-texto;
                margin: 0 0 0.5rem 0;
            }

            .section-description {
                font-size: 1.4rem;
                color: v.$gris-oscuro;
                margin: 0;
            }

            .users-count {
                background-color: v.$lila-easily;
                color: v.$blanco;
                padding: 0.3rem 0.8rem;
                border-radius: v.$border-radius-large;
                font-size: 1.2rem;
                font-weight: 600;
                margin-left: 1rem;
            }
        }

        .section-content {
            padding: 3rem;
        }

        // Tabs para estudiantes/profesores
        .users-tabs {
            display: flex;
            border-bottom: 2px solid v.$gris;
            margin-bottom: 3rem;

            .tab-button {
                background: none;
                border: none;
                padding: 1.5rem 3rem;
                font-size: 1.6rem;
                font-weight: 600;
                color: v.$gris-oscuro;
                cursor: pointer;
                border-bottom: 3px solid transparent;
                transition: all v.$transicion-base;

                &:hover {
                    color: v.$lila-easily;
                    background-color: v.$blanco-secundario;
                }

                &.active {
                    color: v.$lila-easily;
                    border-bottom-color: v.$lila-easily;
                }

                .tab-count {
                    background-color: v.$gris;
                    color: v.$blanco;
                    padding: 0.2rem 0.6rem;
                    border-radius: v.$border-radius-large;
                    font-size: 1.1rem;
                    margin-left: 0.5rem;
                }

                &.active .tab-count {
                    background-color: v.$lila-easily;
                }
            }
        }

        // Tabla de usuarios pendientes
        .users-table {
            width: 100%;
            background-color: v.$color-fondo-tabla;
            border-radius: v.$border-radius;
            overflow: hidden;
            box-shadow: v.$sombra-tabla;
            border-collapse: collapse;
            margin-bottom: 2rem;
            border: 1px solid v.$borde-1;

            th, td {
                padding: 1.6rem;
                text-align: left;
                border-bottom: 1px solid v.$borde-1;
                font-size: 1.4rem;
                border: 1px solid v.$borde-1;

                @include m.telefono {
                    padding: 1rem;
                    font-size: 1.2rem;
                }
            }

            th {
                background-color: v.$color-fondo-th;
                color: v.$color-texto;
                font-weight: 600;
                text-transform: uppercase;
                font-size: 1.2rem;
                letter-spacing: 0.5px;
            }

            tbody tr {
                transition: background-color v.$transicion-rapida;

                &:hover {
                    background-color: v.$blanco-secundario;
                }

                &:last-child td {
                    border-bottom: none;
                }
            }

            .user-info {
                display: flex;
                align-items: center;
                gap: 1rem;

                .user-avatar {
                    width: 40px;
                    height: 40px;
                    border-radius: v.$border-radius-circle;
                    background-color: v.$lila-easily;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: v.$blanco;
                    font-weight: bold;
                    font-size: 1.4rem;
                }

                .user-details {
                    .user-name {
                        font-weight: 600;
                        color: v.$color-texto;
                        margin: 0 0 0.2rem 0;
                        font-size: 1.4rem;
                    }

                    .user-email {
                        color: v.$gris-oscuro;
                        font-size: 1.2rem;
                        margin: 0;
                    }
                }
            }

            .user-role {
                padding: 0.3rem 0.8rem;
                border-radius: v.$border-radius;
                font-size: 1.2rem;
                font-weight: 600;

                &.estudiante {
                    background-color: v.$azul;
                    color: v.$blanco;
                }

                &.profesor {
                    background-color: v.$verde;
                    color: v.$blanco;
                }
            }

            .user-date {
                color: v.$gris-oscuro;
                font-size: 1.3rem;
            }

            .user-actions {
                display: flex;
                gap: 0.5rem;
                justify-content: center;

                .btn {
                    padding: 0.6rem 1.2rem;
                    border: none;
                    border-radius: v.$border-radius;
                    cursor: pointer;
                    font-size: 1.2rem;
                    font-weight: 600;
                    transition: all v.$transicion-base;
                    display: flex;
                    align-items: center;
                    gap: 0.3rem;

                    i {
                        font-size: 1.1rem;
                    }

                    &.btn-accept {
                        background-color: v.$verde;
                        color: v.$blanco;

                        &:hover {
                            background-color: color.adjust(v.$verde, $lightness:-10%);
                            transform: translateY(-1px);
                        }
                    }

                    &.btn-reject {
                        background-color: v.$rojo;
                        color: v.$blanco;

                        &:hover {
                            background-color: color.adjust(v.$rojo, $lightness:-10%);
                            transform: translateY(-1px);
                        }
                    }

                    &.btn-view {
                        background-color: v.$azul;
                        color: v.$blanco;

                        &:hover {
                            background-color: color.adjust(v.$azul, $lightness:-10%);
                        }
                    }
                }
            }
        }

        // Vista vacía 
        .no-users {
            text-align: center;
            padding: 4rem 2rem;

            .no-users-icon {
                font-size: 6rem;
                color: v.$gris;
                margin-bottom: 2rem;
            }

            .no-users-title {
                font-size: 2.4rem;
                color: v.$color-texto;
                margin-bottom: 1rem;
            }

            .no-users-description {
                font-size: 1.6rem;
                color: v.$gris-oscuro;
            }
        }
    }

    // Estadísticas rápidas del sistema
    .admin-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
        margin-bottom: 4rem;

        .stat-card {
            background: v.$blanco;
            border-radius: v.$border-radius-large;
            padding: 2.5rem;
            box-shadow: v.$sombra-card;
            border-left: 4px solid v.$lila-easily;
            transition: all v.$transicion-base;

            &:hover {
                transform: translateY(-5px);
                box-shadow: v.$sombra-hover;
            }

            .stat-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 1rem;

                .stat-icon {
                    width: 50px;
                    height: 50px;
                    border-radius: v.$border-radius;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 2rem;
                    color: v.$blanco;
                }

                &.users .stat-icon {
                    background-color: v.$azul;
                }

                &.students .stat-icon {
                    background-color: v.$lila-easily;
                }

                &.teachers .stat-icon {
                    background-color: v.$verde;
                }

                &.pending .stat-icon {
                    background-color: v.$amarillo;
                }
            }

            .stat-number {
                font-size: 3rem;
                font-weight: 700;
                color: v.$color-texto;
                margin: 0;
            }

            .stat-label {
                font-size: 1.4rem;
                color: v.$gris-oscuro;
                margin: 0.5rem 0 0 0;
            }

            .stat-change {
                font-size: 1.2rem;
                font-weight: 600;
                
                &.positive {
                    color: v.$verde;
                }

                &.negative {
                    color: v.$rojo;
                }
            }
        }
    }

    // Sección de actividad reciente
    .recent-activity {
        background: v.$blanco;
        border-radius: v.$border-radius-large;
        box-shadow: v.$sombra-card;
        margin-bottom: 3rem;

        .activity-header {
            padding: 2rem 3rem 1rem 3rem;
            border-bottom: 1px solid v.$borde-1;

            .activity-title {
                font-size: 2rem;
                font-weight: 700;
                color: v.$color-texto;
                margin: 0;
            }
        }

        .activity-list {
            padding: 2rem 3rem;

            .activity-item {
                display: flex;
                align-items: center;
                gap: 1.5rem;
                padding: 1.5rem 0;
                border-bottom: 1px solid v.$gris;

                &:last-child {
                    border-bottom: none;
                }

                .activity-icon {
                    width: 40px;
                    height: 40px;
                    border-radius: v.$border-radius-circle;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: v.$blanco;
                    font-size: 1.6rem;

                    &.user-registered {
                        background-color: v.$verde;
                    }

                    &.user-login {
                        background-color: v.$azul;
                    }

                    &.exam-submitted {
                        background-color: v.$lila-easily;
                    }

                    &.course-created {
                        background-color: v.$amarillo;
                        color: v.$negro;
                    }
                }

                .activity-content {
                    flex: 1;

                    .activity-text {
                        font-size: 1.4rem;
                        color: v.$color-texto;
                        margin: 0 0 0.3rem 0;
                    }

                    .activity-time {
                        font-size: 1.2rem;
                        color: v.$gris-oscuro;
                        margin: 0;
                    }
                }

                .activity-badge {
                    background-color: v.$lila-easily;
                    color: v.$blanco;
                    padding: 0.2rem 0.6rem;
                    border-radius: v.$border-radius;
                    font-size: 1rem;
                    font-weight: 600;
                }
            }
        }

        .activity-footer {
            padding: 1rem 3rem 2rem 3rem;
            text-align: center;

            .view-all-btn {
                color: v.$lila-easily;
                text-decoration: none;
                font-weight: 600;
                font-size: 1.4rem;
                transition: color v.$transicion-base;

                &:hover {
                    color: v.$lila-easily-hover;
                    text-decoration: underline;
                }
            }
        }
    }

    // Herramientas de administración rápida
    .admin-tools {
        background: v.$blanco;
        border-radius: v.$border-radius-large;
        box-shadow: v.$sombra-card;
        padding: 3rem;

        .tools-title {
            font-size: 2rem;
            font-weight: 700;
            color: v.$color-texto;
            margin: 0 0 2rem 0;
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;

            .tool-card {
                padding: 2rem;
                border: 2px solid v.$gris;
                border-radius: v.$border-radius;
                text-align: center;
                transition: all v.$transicion-base;
                cursor: pointer;

                &:hover {
                    border-color: v.$lila-easily;
                    transform: translateY(-3px);
                    box-shadow: v.$sombra-hover;
                }

                .tool-icon {
                    font-size: 3rem;
                    color: v.$lila-easily;
                    margin-bottom: 1rem;
                }

                .tool-title {
                    font-size: 1.6rem;
                    font-weight: 600;
                    color: v.$color-texto;
                    margin: 0 0 0.5rem 0;
                }

                .tool-description {
                    font-size: 1.3rem;
                    color: v.$gris-oscuro;
                    margin: 0;
                }

                &.tool-users {
                    &:hover {
                        border-color: v.$azul;
                        .tool-icon { color: v.$azul; }
                    }
                }

                &.tool-courses {
                    &:hover {
                        border-color: v.$verde;
                        .tool-icon { color: v.$verde; }
                    }
                }

                &.tool-reports {
                    &:hover {
                        border-color: v.$amarillo;
                        .tool-icon { color: v.$amarillo; }
                    }
                }

                &.tool-settings {
                    &:hover {
                        border-color: v.$rojo;
                        .tool-icon { color: v.$rojo; }
                    }
                }
            }
        }
    }

    // Responsive adaptations
    @include m.telefono {
        .users-tabs {
            flex-direction: column;

            .tab-button {
                padding: 1rem;
                text-align: left;
            }
        }

        .users-table {
            .user-info {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }

            .user-actions {
                flex-direction: column;
                gap: 0.3rem;

                .btn {
                    padding: 0.5rem 1rem;
                    font-size: 1.1rem;
                }
            }
        }

        .tools-grid {
            grid-template-columns: 1fr;
        }
    }
}

// Estilos específicos para cada página admin individual

// Página de usuarios finales
.admin-usuarios-finales {
    .tabla-estudiantes {
        .tabla-admin {
            border-left: 4px solid v.$azul;
        }

        h2 {
            color: v.$azul;

            i {
                color: v.$azul;
            }
        }
    }

    .tabla-profesores {
        .tabla-admin {
            border-left: 4px solid v.$verde;
        }

        h2 {
            color: v.$verde;

            i {
                color: v.$verde;
            }
        }
    }
}

// Página de pre-usuarios
.admin-pre-usuarios {
    .tabla-pre-estudiantes {
        .tabla-admin {
            border-left: 4px solid v.$lila-easily;
        }

        h2 {
            color: v.$lila-easily;

            i {
                color: v.$lila-easily;
            }
        }
    }

    .tabla-pre-profesores {
        .tabla-admin {
            border-left: 4px solid v.$amarillo;
        }

        h2 {
            color: v.$amarillo;

            i {
                color: v.$amarillo;
            }
        }
    }
}

// Página de cursos
.admin-cursos {
    .form-container {
        border-left: 4px solid v.$verde;

        h3 {
            color: v.$verde;

            i {
                color: v.$verde;
            }
        }
    }

    .tabla-container {
        .tabla-admin {
            border-left: 4px solid v.$verde;
        }

        h3 {
            color: v.$verde;

            i {
                color: v.$verde;
            }
        }
    }
}

// Página de carreras
.admin-carreras {
    .form-container {
        border-left: 4px solid v.$azul;

        h3 {
            color: v.$azul;

            i {
                color: v.$azul;
            }
        }
    }

    .tabla-container {
        .tabla-admin {
            border-left: 4px solid v.$azul;
        }

        h3 {
            color: v.$azul;

            i {
                color: v.$azul;
            }
        }
    }
}

// Página de materias
.admin-materias {
    .form-container {
        border-left: 4px solid v.$lila-easily;

        h3 {
            color: v.$lila-easily;

            i {
                color: v.$lila-easily;
            }
        }
    }

    .tabla-container {
        .tabla-admin {
            border-left: 4px solid v.$lila-easily;
        }

        h3 {
            color: v.$lila-easily;

            i {
                color: v.$lila-easily;
            }
        }
    }
}

// Responsive para páginas admin individuales
@include m.telefono {
    .admin-usuarios-finales,
    .admin-pre-usuarios,
    .admin-cursos,
    .admin-carreras,
    .admin-materias {
        .tabla-admin {
            td:nth-child(n+6),
            th:nth-child(n+6) {
                // display: none;
            }
        }

        .form-container {
            padding: 2rem;

            h3 {
                font-size: 1.8rem;
            }
        }
    }
}
